import{d as T,j as p,k as ce,U as k,g as B,e as A,l as se,V as ie,c as a,I as $,W as U,X as F,i as _,t as y,Y as V,Z as re,$ as de,a0 as q,a1 as ue,w as j,a2 as fe,r as E,p as ve,a3 as W,a4 as X,h as me,a5 as J,a6 as Q,a7 as ee,s as ye,n as ne,a8 as ge,o as be,a9 as he,aa as Ie,ab as ke,G as te,x as L,ac as oe,ad as Ce,ae as Se,B as Oe}from"./index-DugjyzeS.js";import{P as Pe,c as xe}from"./on-popup-reopen-3bbMUo49.js";let we=2e3;const Be=()=>++we,[Te,x]=T("button"),Ae=p({},ce,{tag:k("button"),text:String,icon:String,type:k("default"),size:k("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:k("button"),loadingSize:B,loadingText:String,loadingType:String,iconPosition:k("left")});var _e=A({name:Te,props:Ae,emits:["click"],setup(e,{emit:n,slots:o}){const r=se(),c=()=>o.loading?o.loading():a(F,{size:e.loadingSize,type:e.loadingType,class:x("loading")},null),s=()=>{if(e.loading)return c();if(o.icon)return a("div",{class:x("icon")},[o.icon()]);if(e.icon)return a($,{name:e.icon,class:x("icon"),classPrefix:e.iconPrefix},null)},d=()=>{let l;if(e.loading?l=e.loadingText:l=o.default?o.default():e.text,l)return a("span",{class:x("text")},[l])},f=()=>{const{color:l,plain:u}=e;if(l){const t={color:u?l:"white"};return u||(t.background=l),l.includes("gradient")?t.border=0:t.borderColor=l,t}},S=l=>{e.loading?U(l):e.disabled||(n("click",l),r())};return()=>{const{tag:l,type:u,size:t,block:g,round:b,plain:h,square:I,loading:v,disabled:O,hairline:P,nativeType:N,iconPosition:z}=e,R=[x([u,t,{plain:h,block:g,round:b,square:I,loading:v,disabled:O,hairline:P}]),{[ie]:P}];return a(l,{type:N,class:R,style:f(),disabled:O,onClick:S},{default:()=>[a("div",{class:x("content")},[z==="left"&&s(),d(),z==="right"&&s()])]})}}});const Xe=_(_e),M={show:Boolean,zIndex:B,overlay:y,duration:B,teleport:[String,Object],lockScroll:y,lazyRender:y,beforeClose:Function,overlayStyle:Object,overlayClass:V,transitionAppear:Boolean,closeOnClickOverlay:y},ze=Object.keys(M);let w=0;const H="van-overflow-hidden";function Re(e,n){const o=re(),r="01",c="10",s=u=>{o.move(u);const t=o.deltaY.value>0?c:r,g=fe(u.target,e.value),{scrollHeight:b,offsetHeight:h,scrollTop:I}=g;let v="11";I===0?v=h>=b?"00":"01":I+h>=b&&(v="10"),v!=="11"&&o.isVertical()&&!(parseInt(v,2)&parseInt(t,2))&&U(u,!0)},d=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",s,{passive:!1}),w||document.body.classList.add(H),w++},f=()=>{w&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",s),w--,w||document.body.classList.remove(H))},S=()=>n()&&d(),l=()=>n()&&f();de(S),q(l),ue(l),j(n,u=>{u?d():f()})}function ae(e){const n=E(!1);return j(e,o=>{o&&(n.value=o)},{immediate:!0}),o=>()=>n.value?o():null}const K=()=>{var e;const{scopeId:n}=((e=ve())==null?void 0:e.vnode)||{};return n?{[n]:""}:null},[De,$e]=T("overlay"),Ee={show:Boolean,zIndex:B,duration:B,className:V,lockScroll:y,lazyRender:y,customStyle:Object};var Le=A({name:De,props:Ee,setup(e,{slots:n}){const o=E(),r=ae(()=>e.show||!e.lazyRender),c=d=>{e.lockScroll&&U(d,!0)},s=r(()=>{var d;const f=p(me(e.zIndex),e.customStyle);return J(e.duration)&&(f.animationDuration=`${e.duration}s`),Q(a("div",{ref:o,style:f,class:[$e(),e.className]},[(d=n.default)==null?void 0:d.call(n)]),[[ee,e.show]])});return W("touchmove",c,{target:o}),()=>a(X,{name:"van-fade",appear:!0},{default:s})}});const pe=_(Le),Ne=p({},M,{round:Boolean,position:k("center"),closeIcon:k("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:k("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Ge,Y]=T("popup");var Ke=A({name:Ge,inheritAttrs:!1,props:Ne,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:n,attrs:o,slots:r}){let c,s;const d=E(),f=E(),S=ae(()=>e.show||!e.lazyRender),l=ye(()=>{const i={zIndex:d.value};if(J(e.duration)){const C=e.position==="center"?"animationDuration":"transitionDuration";i[C]=`${e.duration}s`}return i}),u=()=>{c||(c=!0,d.value=e.zIndex!==void 0?+e.zIndex:Be(),n("open"))},t=()=>{c&&xe(e.beforeClose,{done(){c=!1,n("close"),n("update:show",!1)}})},g=i=>{n("clickOverlay",i),e.closeOnClickOverlay&&t()},b=()=>{if(e.overlay)return a(pe,L({show:e.show,class:e.overlayClass,zIndex:d.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},K(),{onClick:g}),{default:r["overlay-content"]})},h=i=>{n("clickCloseIcon",i),t()},I=()=>{if(e.closeable)return a($,{role:"button",tabindex:0,name:e.closeIcon,class:[Y("close-icon",e.closeIconPosition),oe],classPrefix:e.iconPrefix,onClick:h},null)};let v;const O=()=>{v&&clearTimeout(v),v=setTimeout(()=>{n("opened")})},P=()=>n("closed"),N=i=>n("keydown",i),z=S(()=>{var i;const{round:C,position:D,safeAreaInsetTop:G,safeAreaInsetBottom:le}=e;return Q(a("div",L({ref:f,style:l.value,role:"dialog",tabindex:0,class:[Y({round:C,[D]:D}),{"van-safe-area-top":G,"van-safe-area-bottom":le}],onKeydown:N},o,K()),[(i=r.default)==null?void 0:i.call(r),I()]),[[ee,e.show]])}),R=()=>{const{position:i,transition:C,transitionAppear:D}=e,G=i==="center"?"van-fade":`van-popup-slide-${i}`;return a(X,{name:C||G,appear:D,onAfterEnter:O,onAfterLeave:P},{default:z})};return j(()=>e.show,i=>{i&&!c&&(u(),o.tabindex===0&&ne(()=>{var C;(C=f.value)==null||C.focus()})),!i&&c&&(c=!1,n("close"))}),ge({popupRef:f}),Re(f,()=>e.show&&e.lockScroll),W("popstate",()=>{e.closeOnPopstate&&(t(),s=!1)}),be(()=>{e.show&&u()}),he(()=>{s&&(n("update:show",!0),s=!1)}),q(()=>{e.show&&e.teleport&&(t(),s=!0)}),Ie(Pe,()=>e.show),()=>e.teleport?a(ke,{to:e.teleport},{default:()=>[b(),R()]}):a(te,null,[b(),R()])}});const Ue=_(Ke),[je,m]=T("action-sheet"),Me=p({},M,{title:String,round:y,actions:Ce(),closeIcon:k("cross"),closeable:y,cancelText:String,description:String,closeOnPopstate:y,closeOnClickAction:Boolean,safeAreaInsetBottom:y}),He=[...ze,"round","closeOnPopstate","safeAreaInsetBottom"];var Ye=A({name:je,props:Me,emits:["select","cancel","update:show"],setup(e,{slots:n,emit:o}){const r=t=>o("update:show",t),c=()=>{r(!1),o("cancel")},s=()=>{if(e.title)return a("div",{class:m("header")},[e.title,e.closeable&&a($,{name:e.closeIcon,class:[m("close"),oe],onClick:c},null)])},d=()=>{if(n.cancel||e.cancelText)return[a("div",{class:m("gap")},null),a("button",{type:"button",class:m("cancel"),onClick:c},[n.cancel?n.cancel():e.cancelText])]},f=t=>{if(t.icon)return a($,{class:m("item-icon"),name:t.icon},null)},S=(t,g)=>t.loading?a(F,{class:m("loading-icon")},null):n.action?n.action({action:t,index:g}):[a("span",{class:m("name")},[t.name]),t.subname&&a("div",{class:m("subname")},[t.subname])],l=(t,g)=>{const{color:b,loading:h,callback:I,disabled:v,className:O}=t,P=()=>{v||h||(I&&I(t),e.closeOnClickAction&&r(!1),ne(()=>o("select",t,g)))};return a("button",{type:"button",style:{color:b},class:[m("item",{loading:h,disabled:v}),O],onClick:P},[f(t),S(t,g)])},u=()=>{if(e.description||n.description){const t=n.description?n.description():e.description;return a("div",{class:m("description")},[t])}};return()=>a(Ue,L({class:m(),position:"bottom","onUpdate:show":r},Se(e,He)),{default:()=>{var t;return[s(),u(),a("div",{class:m("content")},[e.actions.map(l),(t=n.default)==null?void 0:t.call(n)]),d()]}})}});const Je=_(Ye),[Ze,Z]=T("cell-group"),Fe={title:String,inset:Boolean,border:y};var Ve=A({name:Ze,inheritAttrs:!1,props:Fe,setup(e,{slots:n,attrs:o}){const r=()=>{var s;return a("div",L({class:[Z({inset:e.inset}),{[Oe]:e.border&&!e.inset}]},o,K()),[(s=n.default)==null?void 0:s.call(n)])},c=()=>a("div",{class:Z("title",{inset:e.inset})},[n.title?n.title():e.title]);return()=>e.title||n.title?a(te,null,[c(),r()]):r()}});const Qe=_(Ve);export{Je as A,Xe as B,Qe as C};
